{"version":3,"sources":["message.js"],"names":["changeMessageCount","sign","count","parseInt","$","html","removeMessage","$message","slideUp","remove","on","e","preventDefault","request","target","attr","confirm","isRead","data","parents","postData","find","serialize","ajax","url","pitonConfig","routes","adminMessageDelete","adminMessageSave","method","success","r","status","undefined","error","console","log"],"mappings":";AAIA,IAAIA,EAAqB,SAACC,GAClBA,GAAAA,EAAM,CACFC,IAAAA,EAAQC,SAASC,EAAE,mBAAmBC,QAAU,GAChD,MAAQJ,EACRC,IACO,MAAQD,GACA,KAATC,IAAYA,EAAQ,MAE9BE,EAAE,mBAAmBC,KAAKH,KAG9BI,EAAgB,SAACC,EAAUN,GAC3BM,EAASC,QAAQ,WACbD,EAASE,WAEbT,EAAmBC,IAEvBG,EAAE,kBAAkBM,GAAG,QAAS,SAAU,SAAUC,GAChDA,EAAEC,iBACEC,IAAAA,EAAUT,EAAEO,EAAEG,QAAQC,KAAK,SAC3B,GAAA,WAAaF,IAAYG,UAClB,OAAA,EAEPC,IAAAA,EAASb,EAAEO,EAAEG,QAAQI,KAAK,UAC1BX,EAAWH,EAAEO,EAAEG,QAAQK,QAAQ,kBAC/BC,EAAWb,EAASc,KAAK,QAAQC,YACrClB,EAAEmB,KAAK,CACHC,IAAiB,UAAXX,EAAuBY,YAAYC,OAAOC,mBAAqBF,YAAYC,OAAOE,iBACxFC,OAAQ,OACRX,KAAME,EACNU,QAAS,SAAUC,GACXA,GAAa,YAAbA,EAAEC,OACE,GAAA,WAAanB,EAEbP,EAAcC,EADW,MAAXU,EAAkB,IAAM,UAEnC,GAAI,WAAaJ,EAAS,CAE7BP,EAAcC,EADW,MAAXU,EAAkB,SAAMgB,KAKlDC,MAAO,SAAUH,GACbI,QAAQC,IAAI","file":"message.js","sourceRoot":"..","sourcesContent":["// --------------------------------------------------------\n// Message management\n// --------------------------------------------------------\n// +/- Message count\nlet changeMessageCount = (sign) => {\n    if (sign) {\n        let count = parseInt($('.jsMessageCount').html() || 0);\n        if ('+' === sign) {\n            count++\n        } else if ('-' === sign) {\n            if (--count == 0) count = null;\n        }\n        $('.jsMessageCount').html(count);\n    }\n}\nlet removeMessage = ($message, sign) => {\n    $message.slideUp(function () {\n        $message.remove();\n    });\n    changeMessageCount(sign);\n}\n$('.jsMessageWrap').on('click', 'button', function (e) {\n    e.preventDefault();\n    let request = $(e.target).attr('value');\n    if ('delete' === request && !confirm()) {\n        return false;\n    }\n    let isRead = $(e.target).data('isRead');\n    let $message = $(e.target).parents('.jsMessageWrap');\n    let postData = $message.find('form').serialize();\n    $.ajax({\n        url: (request == 'delete') ? pitonConfig.routes.adminMessageDelete : pitonConfig.routes.adminMessageSave,\n        method: \"POST\",\n        data: postData,\n        success: function (r) {\n            if (r.status === \"success\") {\n                if ('toggle' === request) {\n                    let updown = (isRead === 'Y') ? '+' : '-';\n                    removeMessage($message, updown);\n                } else if ('delete' === request) {\n                    let updown = (isRead === 'N') ? '-' : undefined;\n                    removeMessage($message, updown);\n                }\n            }\n        },\n        error: function (r) {\n            console.log('PitonCMS: There was an error submitting the form. Contact your administrator.')\n        }\n    });\n});\n"]}