{"version":3,"sources":["modules/formControl.js","modules/alert.js","modules/collapse.js","modules/main.js","modules/drag.js","navigation.js"],"names":["enableFormControl","control","disabled","disableFormControl","dismissAlertInlineMessage","event","target","dataset","dismiss","closest","remove","alertInlineMessage","severity","heading","message","container","document","createElement","innerHTML","pitonConfig","alertInlineHTML","querySelector","classList","add","join","insertAdjacentHTML","window","scrollTo","collapseToggle","collapse","collapseTarget","toggle","querySelectorAll","forEach","form","saveButtons","addEventListener","e","confirm","preventDefault","deletePrompt","movedElement","inputEvent","Event","dragZone","dragHover","dropZone","style","cssText","getMovedElement","getDropInputEvent","dragStartHandler","dataTransfer","setData","dropEffect","setTimeout","element","parentElement","insertBefore","cloneNode","lastElementChild","appendChild","dragEnterHandler","stopPropagation","matches","dragOverHandler","dragLeaveHandler","dragDropHandler","nextSibling","dispatchEvent","dragEndHandler","zone","navItems","navPages","navCollections","navPlaceholder","navElement","navContainer","navItemKey","appendNavElements","nav","newNav","arrayKey","input","name","replace","navId","pageId","value","pageTitle","navTitle","url","collectionId","collectionTitle","length","addPageNav","checked","navItem","push","addCollectionNav","addPlaceholderNav","movedElementParentId","newParent"],"mappings":"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","file":"navigation.js","sourceRoot":"..","sourcesContent":["/**\n * Enable Form Control\n *\n * @param {object} control Control button element\n */\nconst enableFormControl = function(control) {\n    if (control && control.disabled) {\n        control.disabled = false;\n    }\n}\n\n/**\n * Disable Form Control\n *\n * @param {object} control Control button element\n */\nconst disableFormControl =  function(control) {\n    if (control && !control.disabled) {\n        control.disabled = true;\n    }\n}\n\nexport { enableFormControl, disableFormControl };","/**\n * Dismiss Inline Alert\n * @param {Event} event\n */\nconst dismissAlertInlineMessage = function(event) {\n    if (event.target.dataset.dismiss === \"alert\") {\n        event.target.closest(`[data-alert=\"container\"]`).remove();\n    }\n}\n\n/**\n * Display Inline HTML Message Alert\n * @param {string} severity Severity color code\n * @param {string} heading  Message heading\n * @param {mixed} message   Message list\n */\nconst alertInlineMessage = function(severity, heading, message) {\n    // Create element and insert alert HTML and update with alert data\n    let container = document.createElement(\"div\");\n    container.innerHTML = pitonConfig.alertInlineHTML;\n    container.querySelector(`[data-alert=\"container\"]`).classList.add(\"alert-\" + severity);\n    container.querySelector(`[data-alert=\"heading\"]`).innerHTML = heading;\n\n    // Stringify message\n    if (typeof message === 'object') {\n        message = message.join(\"<br>\");\n    }\n    container.querySelector(`[data-alert=\"content\"]`).innerHTML = message;\n\n    // Insert into main or body\n    let mainContainer = document.querySelector(\"main.main-content\");\n    mainContainer.insertAdjacentHTML('afterbegin', container.innerHTML);\n    window.scrollTo(0,0);\n}\n\nexport { alertInlineMessage, dismissAlertInlineMessage };","/**\n * Collapse Toggle\n * @param {Event} event\n */\nconst collapseToggle = function(event) {\n    if (event.target.dataset.collapse === 'toggle') {\n        let collapseTarget = event.target.closest(`[data-collapse=\"parent\"]`).querySelector(`[data-collapse=\"target\"]`);\n\n        if (collapseTarget) {\n            collapseTarget.classList.toggle(\"collapsed\");\n        }\n    }\n}\n\nexport { collapseToggle };","// --------------------------------------------------------\n// Main JS\n// --------------------------------------------------------\n\nimport { enableFormControl, disableFormControl } from './formControl.js';\nimport { dismissAlertInlineMessage } from './alert.js';\nimport { collapseToggle } from './collapse.js';\n\n// Form Control Events\ndocument.querySelectorAll(\"form\").forEach(form => {\n    // Disable form controls and listen for form input changes to re-enable save controls\n    let saveButtons = form.querySelectorAll(`[data-form-button=\"save\"]`);\n    if (saveButtons) {\n        saveButtons.forEach(control => {\n            disableFormControl(control);\n        });\n\n        // Listen for form changes to reenable controls\n        form.addEventListener(\"input\", (e) => {\n            saveButtons.forEach(control => {\n                enableFormControl(control);\n            });\n        }, false);\n    }\n\n    // Confirm discard of changes\n    form.querySelectorAll(`[data-form-button=\"cancel\"]`).forEach(control => {\n        control.addEventListener(\"click\", (e) => {\n            let userResponse = confirm(\"Click Ok to discard your changes, or cancel continue editing?\");\n            if (!userResponse) e.preventDefault();\n        }, false);\n    });\n\n    // Confirm delete\n    form.querySelectorAll(`[data-delete-prompt]`).forEach(control => {\n        control.addEventListener(\"click\", (e) => {\n            if (!confirm(e.target.dataset.deletePrompt)) e.preventDefault();\n        }, false);\n    });\n});\n\n// Binding click events to document\ndocument.addEventListener(\"click\", dismissAlertInlineMessage, false);\ndocument.addEventListener(\"click\", collapseToggle, false);","// Reference to element to be moved\nlet movedElement;\n\n// Event to dispatch pseudo \"input\" event\nconst inputEvent = new Event(\"input\", {\"bubbles\": true});\n\n// Drop zone classes\nconst dragZone = \"border: 1px dashed #000; height: 20px;\";\nconst dragHover = \"border: 1px dashed #000; height: 60px;\";\n\n// Empty drop zone divs to inject in DOM around draggable elements\nconst dropZone = document.createElement(\"div\");\ndropZone.classList.add(\"drag-drop\");\ndropZone.style.cssText = dragZone;\n\n/**\n * Return Moved Element\n */\nconst getMovedElement = function() {\n    return movedElement;\n}\n\n/**\n * Return Drop Input Event\n */\nconst getDropInputEvent = function() {\n    return inputEvent;\n}\n\n/**\n * Drag Start Handler\n * @param {Event} event\n */\nconst dragStartHandler = function(event) {\n    // Save reference to the element being moved\n    movedElement = event.target;\n\n    event.dataTransfer.setData(\"text/plain\", null);\n    event.dataTransfer.dropEffect = \"move\";\n\n    // Insert drop zone divs around each draggable element\n    // setTimeout() hack: https://stackoverflow.com/a/34698388/452133\n    // To allow DOM manipulation in dragstart\n    setTimeout(() => {\n        document.querySelectorAll(`[draggable=\"true\"]`).forEach(element => {\n            // Insert drop zone before all draggable elements\n            element.parentElement.insertBefore(dropZone.cloneNode(), element);\n\n            // Insert drop zone after last child\n            if (element.parentElement.lastElementChild === element) {\n                element.parentElement.appendChild(dropZone.cloneNode());\n            }\n        });\n\n        // Optional \"other\" drop targets\n        document.querySelectorAll(`[data-drop-zone=\"1\"]`).forEach(element => {\n            element.parentElement.insertBefore(dropZone.cloneNode(), element);\n        });\n    }, 0);\n}\n\n/**\n * Drag Enter Handler\n * @param {Event} event\n */\nconst dragEnterHandler = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.dataTransfer.dropEffect = \"move\";\n\n    if (event.target.matches(\".drag-drop\")) {\n        event.target.classList.add(\"drag-hover\");\n        event.target.style.cssText = dragHover;\n    }\n}\n\n/**\n * Drag Over Handler\n * @param {Event} event\n */\nconst dragOverHandler = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.dataTransfer.dropEffect = \"move\";\n}\n\n/**\n * Drag Leave Handler\n * @param {Event} event\n */\nconst dragLeaveHandler = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    event.dataTransfer.dropEffect = \"move\";\n\n    if (event.target.matches(\".drag-drop\")) {\n        event.target.classList.remove(\"drag-hover\");\n        event.target.style.cssText = dragZone;\n    }\n}\n\n/**\n * Drag Drop Handler\n * @param {Event} event\n */\nconst dragDropHandler = function(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (movedElement !== event.target && event.target.matches(\".drag-drop\")) {\n        event.target.parentElement.insertBefore(movedElement, event.target.nextSibling)\n        movedElement.dispatchEvent(inputEvent);\n    }\n}\n\n/**\n * Drag End Handler\n * @param {Event} event\n */\nconst dragEndHandler = function(event) {\n    // Cleanup drop zones\n    document.querySelectorAll(\".drag-drop\").forEach(zone => {\n        zone.remove();\n    });\n}\n\nexport { dragStartHandler, dragEnterHandler, dragOverHandler, dragLeaveHandler, dragDropHandler, dragEndHandler, getMovedElement, getDropInputEvent };","// --------------------------------------------------------\n// Navigation\n// --------------------------------------------------------\nimport './modules/main.js';\nimport { getMovedElement, dragStartHandler, dragEnterHandler, dragOverHandler, dragLeaveHandler, dragEndHandler } from './modules/drag.js';\n\nconst navItems = [];\nconst navPages = document.querySelectorAll(`[data-add-nav=\"page\"] input`);\nconst navCollections = document.querySelectorAll(`[data-add-nav=\"collection\"] input`);\nconst navPlaceholder = document.querySelectorAll(`[data-add-nav=\"placeholder\"] input`);\nconst navElement = document.querySelector(`[data-navigation=\"spare\"] > div`);\nconst navContainer = document.querySelector(`[data-navigation-container=\"1\"]`);\nlet navItemKey = 0;\n\n/**\n * Append Navigation Elements\n */\nconst appendNavElements = function() {\n  navItems.forEach(nav => {\n    // Clone spare navigation element, and set unique name array key so POST array keeps inputs together\n    let newNav = navElement.cloneNode(true);\n    let arrayKey = (navItemKey++) + \"n\";\n    newNav.querySelectorAll(`input[name^=nav]`).forEach(input => {\n      input.name = input.name.replace(/(.+?\\[)(\\].+)/, \"$1\" + arrayKey + \"$2\");\n    });\n    newNav.dataset.navId = arrayKey;\n\n    // Set data\n    if (nav.pageId) {\n      newNav.querySelector(`input[name$=\"\\[pageId\\]\"]`).value = nav.pageId;\n      newNav.querySelector(`[data-nav=\"title\"]`).innerHTML = nav.pageTitle;\n      newNav.querySelector(`[data-nav=\"type\"]`).innerHTML = \"page\";\n      newNav.querySelector(`[data-nav=\"pageTitle\"]`).innerHTML = nav.pageTitle;\n      newNav.querySelector(`[data-nav=\"pageTitle\"]`).parentElement.classList.remove(\"d-none\");\n\n    } else if (nav.navTitle) {\n      newNav.querySelector(`[data-nav=\"title\"]`).innerHTML = nav.navTitle;\n      newNav.querySelector(`[data-nav=\"type\"]`).innerHTML = \"placeholder\";\n      newNav.querySelector(`input[name$=\"\\[navTitle\\]\"]`).value = nav.navTitle;\n      newNav.querySelector(`input[name$=\"\\[url\\]\"]`).value = nav.url;\n      newNav.querySelector(`input[name$=\"\\[url\\]\"]`).parentElement.classList.remove(\"d-none\");\n\n    } else if (nav.collectionId) {\n      newNav.querySelector(`input[name$=\"\\[collectionId\\]\"]`).value = nav.collectionId;\n      newNav.querySelector(`[data-nav=\"title\"]`).innerHTML = nav.collectionTitle;\n      newNav.querySelector(`[data-nav=\"type\"]`).innerHTML = \"collection\";\n      newNav.querySelector(`[data-nav=\"collectionTitle\"]`).innerHTML = nav.collectionTitle;\n      newNav.querySelector(`[data-nav=\"collectionTitle\"]`).parentElement.classList.remove(\"d-none\");\n\n    }\n\n    navContainer.appendChild(newNav);\n  });\n\n  // Reset\n  navItems.length = 0;\n}\n\n/**\n * Add Page Navigation\n */\nconst addPageNav = function() {\n  navPages.forEach(element => {\n    if (element.checked) {\n      let navItem = {\n        \"pageId\": element.dataset.pageId,\n        \"pageTitle\": element.dataset.pageTitle\n      }\n\n      element.checked = false;\n      navItems.push(navItem);\n    }\n\n  });\n\n  appendNavElements();\n}\n\n/**\n * Add Collection Navigation\n */\nconst addCollectionNav = function() {\n  navCollections.forEach(element => {\n    if (element.checked) {\n      let navItem = {\n        \"collectionId\": element.dataset.collectionId,\n        \"collectionTitle\": element.dataset.collectionTitle\n      }\n\n      element.checked = false;\n      navItems.push(navItem);\n    }\n\n  });\n\n  appendNavElements();\n}\n\n/**\n * Add Placeholder Navigation\n */\nconst addPlaceholderNav = function() {\n  if (navPlaceholder[0].value) {\n    let navItem = {\n      \"navTitle\": navPlaceholder[0].value,\n      \"url\": navPlaceholder[1].value\n    }\n\n    navPlaceholder[0].value = \"\";\n    navPlaceholder[1].value = \"\";\n    navItems.push(navItem);\n  }\n\n  appendNavElements();\n}\n\n/**\n * Insert Child Drop Zone\n */\n\n/**\n * OVERRIDE Drag Drop Handler\n * Overrides drag.js to support child navigation drops\n * @param {Event} event\n */\nconst dragDropHandler = function(event) {\n  event.preventDefault();\n  event.stopPropagation();\n\n  let movedElement = getMovedElement();\n\n  // Nothing to do if dropping on self\n  if (movedElement !== event.target && event.target.matches(\".drag-drop\")) {\n    let movedElementParentId = movedElement.querySelector(`input[name$=\"\\[parentId\\]\"]`).value;\n    let newParent = event.target.parentElement.closest(`[data-navigation=\"parent\"]`);\n\n    // If the element parentId matches the current parent ID (element sorted within current level), just drop in new order\n    if (movedElementParentId === newParent.dataset.navId) {\n      event.target.parentElement.insertBefore(movedElement, event.target.nextSibling);\n    }\n\n    // If the element has a parentId and the current parent HAS changed, move to last child of new parent\n    if (movedElementParentId !== newParent.dataset.navId) {\n      movedElement.querySelector(`input[name$=\"\\[parentId\\]\"]`).value = newParent.dataset.navId;\n\n      // Add / remove class\n      if (newParent.dataset.navId === \"0\") {\n        movedElement.classList.remove(\"sub-toggle-block\");\n      } else {\n        movedElement.classList.add(\"sub-toggle-block\");\n      }\n\n      event.target.parentElement.insertBefore(movedElement, event.target.nextSibling);\n    }\n  }\n}\n\n// Bind events\ndocument.querySelector(`[data-add-nav=\"pageButton\"]`).addEventListener(\"click\", addPageNav, false);\ndocument.querySelector(`[data-add-nav=\"collectionButton\"]`).addEventListener(\"click\", addCollectionNav, false);\ndocument.querySelector(`[data-add-nav=\"placeholderButton\"]`).addEventListener(\"click\", addPlaceholderNav, false);\n\n// Draggable navigation elements\ndocument.querySelectorAll(`[data-draggable=\"children\"]`).forEach(zone => {\n  zone.addEventListener(\"dragstart\", dragStartHandler, false);\n  zone.addEventListener(\"dragenter\", dragEnterHandler, false);\n  zone.addEventListener(\"dragover\", dragOverHandler, false);\n  zone.addEventListener(\"dragleave\", dragLeaveHandler, false);\n  zone.addEventListener(\"drop\", dragDropHandler, false);\n  zone.addEventListener(\"dragend\", dragEndHandler, false);\n});"]}