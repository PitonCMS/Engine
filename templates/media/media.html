{% extends '@admin/_adminBase.html' %}
{% import "@admin/media/_mediaMacros.html" as mediaMacro %}

{% block htmlTitle 'Media' %}
{% block headText 'Media' %}
{% block sectionId 'mediaPage' %}

{% block sidebar %}
<div class="sidebar-inner">
{# Button to trigger upload modal #}
    <div class="button-group">
        <div class="btn btn-link btn-sm" data-toggle="modal" data-target="#mediaUpload">
        Upload New Media
        </div>
    </div>
</div>
{% endblock sidebar %}

{% block content %}
<div class="content-block">
 {{ mediaMacro.upload() }}

 <div class="section-title form-inline mt-0">
  <h3>Media Library</h3>
  <select class="form-control ml-auto jsMediaCategorySelect">
   <option value="all" {% if page.category == 'all' %}selected{% endif %}>All Media</option>
   {% for c in getMediaCategories() %}
   <option value="{{ c.category }}" {% if page.category == c.category %}selected{% endif %}>{{ c.category }}</option>
   {% endfor %}
  </select>
 </div>

 <div class="media-wrapper">
  {% for media in page.media %}
  {{ mediaMacro.card(media, page.categories, true) }}
  {% else %}
  <strong>No Media Found</strong>
  {% endfor %}
 </div>
 {{ pagination() }}
</div>

{% endblock content %}

{% block foot %}
<script src="{{ basePath() }}/admin/js/media.js"></script>
{# This fixes an issue with the BS file upload so that the selected filename shows in the input #}
<script src="https://cdn.jsdelivr.net/npm/bs-custom-file-input/dist/bs-custom-file-input.min.js"></script>
<script>
 bsCustomFileInput.init()
</script>
{% endblock foot %}