{% extends '@admin/_adminBase.html' %}
{% import _self as form %}

{% block htmlTitle 'Galleries' %}
{% block headText 'Galleries' %}
{% block sectionId 'mediaCategories' %}

{% block sidebar %}
{% include "@admin/media/_mediaSidebar.html" %}
{% endblock sidebar %}

{% block content %}
<form class="jsEditMediaCategory" action="{{ pathFor('adminSaveMediaCategories') }}" method="post"
  accept-charset="utf-8">
  <input type="hidden" name="{{ site.csrf.name }}" value="{{ site.csrf.value }}">

  <div class="button-group span">
    <!-- <button class="btn btn-primary ml-2" type="submit" name="button" value="save">Save</button> -->
    <a class="btn btn-warning ml-2" href="{{ pathFor('adminEditMediaCategories') }}">Cancel</a>
  </div>

  {% for c in page.categories %}
  {{ form.categoryInput(c) }}
  {% endfor %}

  {# Extra empty form on page load to add a new category #}
  {{ form.categoryInput(c) }}

</form>
{% endblock content %}

{% macro categoryInput(category) %}
<div class="form-group jsMediaCategory">
  <input type="hidden" name="id[{{ category.id }}]" value="{{ category.id }}">

  <input type="text" class="form-control" name="category[{{ category.id }}]" value="{{ category.category }}"
    placeholder="New Gallery name" autocomplete="off">
  {% if not category.id  %}
  <button class="btn btn-success btn-sm" type="submit" name="button" value="save">Add</button>
  {% endif %}
  {% if category.id %}
  <button class="btn btn-danger btn-sm" type="button" name="button" value="{{ category.id }}">Delete</button>
  {% endif %}

</div>
{% endmacro categoryInput %}