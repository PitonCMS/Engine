{% extends '@admin/_adminBase.html' %}
{% import '@admin/pages/_pageMacros.html' as pageMacro %}
{% import "@admin/includes/_pitonMacros.html" as pitonMacro %}

{% block htmlTitle 'Content' %}

{% block contentHeader %}
<div class="content-header-inner">
  <div class="breadcrumb"></div>
  <h1 class="section-title">Content</h1>

  <div class="btn-dropdown-block">
    <div class="btn btn-dropdown">
      <span>Add Page</span> <i class="fas fa-chevron-down"></i>
    </div>
    <div class="form-group-block">
      {# List all templates with "templateType": "page" #}
      {% for pt in getPageTemplates() %}
      <div class="form-group">
        <a href="{{ pathFor('adminPageEdit', {}, {'definition': pt.filename}) }}">{{ pt.name }}</a>
      </div>
      {% endfor %}
      <hr>
      {# List all saved collection groups #}
      {% for ct in getCollections() %}
      <div class="form-group">
        <a href="{{ pathFor('adminPageEdit', {}, {'collectionId': ct.id}) }}">{{ ct.collection_title }}</a>
      </div>
      {% endfor %}
    </div>
  </div>

</div>
{% endblock contentHeader %}

{% block content %}
<!-- Media Filter -->
<div class="filter-block">

  {{ pitonMacro.filterSearch() }}
  {{ pitonMacro.filterOptions('radio', 'Page Status', 'status', ['All', 'Published', 'Pending', 'Draft']) }}

</div>

{# Page List Titles #}
<div class="list-item-page-header">
  <div class="list-item-page__heading media">Media</div>
  <div class="list-item-page__heading title">Title</div>
  <div class="list-item-page__heading status">Status</div>
  <div class="list-item-page__heading template">Template</div>
  <div class="list-item-page__heading collection">Collection</div>
</div>

{# Page List  #}
{% for p in page.pages %}
{# From _pageMacros #}
{{ pageMacro.pageListItem(p) }}
{% else %}
<h5>No Pages Found</h5>
{% endfor %}

{{ pagination() }}
{% endblock content %}

{% block foot %}
{{ getJsFileSource('pages') }}
{% endblock foot %}