{% extends '@admin/_adminBase.html' %}

{% block htmlTitle 'Users' %}

{% block contentHeader %}
  <div class="content-header-inner">
    <div class="breadcrumb"></div>
    <h3 class="section-title">Users</h3>

    <div class="btn-group">
      <a class="btn btn-add btn-sm" href="{{ pathFor('adminToolUserEdit') }}">Add User</a>
    </div>
  </div>

{% endblock contentHeader %}

{% block content %}
  <div class="content-block">
    {% if page.recommendRecoveryEmail %}
    {# TODO Put this notice in a dismissable alert #}
      <div class="one-admin-notice span">
        <p>You only have one Administrator email registered. You should consider adding a second Administrator as login recovery email
              address.</p>
      </div>
    {% endif %}

    <div class="filter-block">

      <div class="search-block">
       <div class="search-icon">
        <i class="fas fa-search"></i>
       </div>
       <div class="search-input">
        <input type="search" name="search" id="search" class="search" placeholder="Search users" autocomplete="false">
       </div>
      </div>

      <div class="btn-dropdown-block">
       <div class="btn btn-dropdown btn-sm"><span>Status</span> <span><i class="fas fa-chevron-down"></i></span>
       </div>
       <div class="form-group-block">
        <div class="form-group">
         <input type="radio" class="radio-hidden" id="users-all" name="userstatus" value="all">
         <label for="users-all">All</label>
        </div>
        <div class="form-group">
         <input type="radio" class="radio-hidden" id="users-active" name="userstatus" value="active">
         <label for="users-active">Active</label>
        </div>
        <div class="form-group">
         <input type="radio" class="radio-hidden" id="users-inactive" name="userstatus" value="inactive">
         <label for="users-inactive">Inactive</label>
        </div>
       </div>
      </div>

     </div>


     {# TODO Sort out the users table #}
    {# User Table Headings #}
    <div class="page-list-item-header">
      <div class="page-list-item__heading">Name</div>
      <div class="page-list-item__heading">Email</div>
      <div class="page-list-item__heading">Active</div>
      <div class="page-list-item__heading">Admin</div>
    </div>

    {# Loop through saved users #}
    {% for user in page.users %}
    <a class="page-list-item" href="{{ pathFor('adminToolUserEdit', {'id': user.id}) }}">
      <div class="page-list-item__title">{{ user.first_name }} {{ user.last_name }}</div>
      <div class="page-list-item__title"><a href="mailto:{{ user.email }}" target="_blank">{{ user.email }}</a></div>
      <div class="page-list-item__title">{% if user.active == 'Y' %}Active{% endif %}</div>
      <div class="page-list-item__title">{% if user.role == 'A' %}Admin{% endif %}</div>
    </a>
    {% endfor %}

  </div><!-- /.content-block -->
{% endblock content %}

{% block foot %}
  <script src="{{ basePath() }}/admin/js/user.js"></script>
{% endblock foot %}
